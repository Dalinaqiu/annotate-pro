

# 🧭 AnnotatePro - 新一代数据标注平台 PRD（结构化重排版）

> Version 1.2 · 2025  
> 目标：构建现代化、智能化、可协作的多模态数据标注平台  

---

## 🧩 1. 产品概述

### 🎯 1.1 产品定位
AnnotatePro 是一个基于 **TypeScript + React + Next.js** 的现代化数据标注平台，提供高性能、多模态、AI 驱动的标注解决方案。  
核心特性包括：智能标注、实时协作、质量控制、主动学习。

### ⚙️ 1.2 技术栈
| 模块     | 技术                               |
| -------- | ---------------------------------- |
| 前端     | React 18+、Next.js 14+、TypeScript |
| UI 框架  | Tailwind CSS + shadcn/ui           |
| 后端     | Next.js API Routes + tRPC          |
| 数据库   | PostgreSQL + Prisma ORM            |
| 缓存     | Redis                              |
| 存储     | AWS S3 / Cloudflare R2             |
| 实时通信 | Socket.io                          |
| 认证     | NextAuth.js (含 SSO/SAML)          |
| 部署     | Vercel / Docker                    |

### 💎 1.3 核心价值
- 高性能渲染、低延迟交互  
- AI 原生集成，智能预标注与质量控制  
- 多人实时协作  
- 云原生架构，部署灵活  
- 模块化扩展能力  

---

## 👥 2. 功能需求（含交互与页面逻辑）

<details>
<summary>▶ 2.1 用户管理</summary>

### 🔐 2.1.1 身份认证
- 登录方式：邮箱密码 / OAuth（Google、GitHub、Microsoft）/ Magic Link  
- 支持 2FA 二次验证、SSO（企业版）  
- 登录状态管理：显示已登录设备，可手动下线  
- API Key：支持命名、过期时间与撤销  

**页面交互**
- 登录页：动态错误提示、loading 状态  
- 注册页：邮箱激活链接，24h 失效  
- Magic Link：邮件内点击直接登录  
- Session 管理：用户可一键终止其他设备会话  

---

### 👥 2.1.2 用户角色与权限
| 角色       | 权限                 |
| ---------- | -------------------- |
| 系统管理员 | 全局管理             |
| 组织管理员 | 管理组织内项目与成员 |
| 项目管理员 | 管理项目配置与任务   |
| 标注员     | 执行标注任务         |
| 审核员     | 质量审核与修改       |
| 访客       | 只读访问             |

**RBAC 权限层级**
- 资源级访问控制  
- 项目级别继承  
- 操作审计日志（可导出 CSV）

</details>

---

<details>
<summary>▶ 2.3 项目管理</summary>

### 🧱 2.3.1 项目创建流程
1. **选择项目类型**：图像 / 文本 / 音频 / 视频 / 多模态（卡片式展示）  
2. **配置模板**：左侧拖拽标签，右侧实时预览  
3. **添加成员**：输入邮箱→角色选择→权限分配  
4. **确认创建**：展示摘要，可返回修改  

### ⚙️ 2.3.4 项目设置界面
- 审核流程可视化（节点式流程图）  
- Webhook 配置支持测试推送  
- 模型集成测试：实时验证结果  
- 审核模式切换（单人 / 双人 / 多级）  

**UI 交互示例**
- 任务优先级设置：拖动滑块  
- 成员管理：表格式 + 快速搜索  
- 项目归档：弹窗确认 + 可恢复  

</details>

---

<details>
<summary>▶ 2.4 数据管理</summary>

### 📂 2.4.1 数据导入方式
| 类型         | 支持功能                               |
| ------------ | -------------------------------------- |
| 本地上传     | 拖拽、批量上传、文件夹上传、压缩包解压 |
| 云同步       | AWS S3 / GCS / Azure / Cloudflare R2   |
| URL 批量导入 | 粘贴多行 / CSV 上传 / JSON 导入        |
| 预标注导入   | COCO / YOLO / Pascal VOC / 自定义格式  |

**交互说明**
- 上传进度条实时更新  
- 上传后跳转“数据预览”页  
- 云同步配置 CRON 定时任务  

---

### 🔍 2.4.3 数据过滤与搜索
- 支持全文搜索 + 条件筛选（标签、标注员、状态、时间）  
- 搜索条件可保存命名  
- 结果支持卡片/表格视图切换  

---

### 🧹 2.4.5 数据质量
- 检查项：完整性 / 重复性 / 损坏检测 / 格式验证  
- 输出：质量评分 + 自动报告（可导出）  

</details>

---

<details>
<summary>▶ 2.5 任务管理</summary>

### 🗂️ 2.5.1 任务创建与分配
- 支持批量创建规则（按数量或时间分片）  
- 自动分配算法：轮询 / 负载 / 技能匹配  
- 任务池看板：拖拽任务卡片分配  

### ⏱️ 2.5.3 状态管理
状态流转：
`待标注 → 进行中 → 已完成 → 待审核 → 审核通过 / 驳回`

### 🧭 2.5.4 操作逻辑
- 列表多选后激活批量操作区  
- 任务卡片 hover 显示操作菜单（重置 / 删除 / 导出）  

</details>

---

<details>
<summary>▶ 2.6 标注界面（核心交互）</summary>

### 💡 通用布局
- 左侧工具栏 + 右侧属性栏 + 顶部保存栏  
- 本地自动保存，断网提示“离线模式”  
- 支持布局保存、快捷键自定义  
- AI 助手侧边浮窗（命令式操作）  

---

### 🖼️ 图像标注
- 拖拽创建边界框 → 自动弹出标签浮窗  
- 支持旋转、多标签、复制粘贴  
- 多边形编辑：节点 hover 高亮、双击删除  
- 分割标注：滚轮调笔刷、右键橡皮擦  
- 属性栏：置信度滑杆、批量编辑  

---

### 📝 文本标注
- 高亮选中即弹出标签选择窗  
- 实体层级树实时更新  
- 关系标注采用画布连线模式  
- 支持多维度文本生成评估（质量、事实性、偏见性）  

---

### 🔊 音频标注
- 波形交互：拖拽选区→添加标签  
- 快捷键控制播放（Space/←/→）  
- 多轨道支持说话人区分  

---

### 🎬 视频标注
- 时间轴关键帧显示 + 自动追踪插帧  
- 路径颜色区分不同对象  
- 可切换“帧标注模式”与“追踪模式”  

</details>

---

<details>
<summary>▶ 2.7 AI 智能助手</summary>

### 🤖 2.7.1 预标注与模型集成
- 模型：OpenAI Vision / Claude / SAM2 / YOLO  
- 批量预标注支持队列与进度追踪  
- 置信度过滤阈值滑杆  

### 💬 2.7.3 对话助手
- 悬浮聊天窗，可询问标注规范或示例  
- 内置命令提示：“解释标签规则”、“生成标注模板”  

### 🧠 2.7.5 主动学习
- 不确定性采样  
- 自动推荐高价值样本  
- 模型性能趋势可视化  

</details>

---

<details>
<summary>▶ 2.8 协作与通知</summary>

### 💬 评论系统
- 区域右键 → 添加评论（可带截图引用）  
- @提及成员 → 通知推送  
- 评论可标记“已解决”  

### 🔔 通知系统
- 顶部铃铛图标 + 未读红点提示  
- 支持浏览器推送、邮件通知、Webhook  

</details>

---

<details>
<summary>▶ 2.9 质量控制</summary>

### 🧾 审核工作流
- 看板式界面：待审 → 已审  
- 拖拽任务卡片流转  
- 审核动作：通过 / 驳回 / 修改 / 添加意见  

### 📊 一致性检查
- IoU / F1 / 编辑距离  
- 报告图表支持导出  

### 🏅 绩效面板
- 标注速度、质量、返工率折线图  
- 支持时间段筛选与成员对比  

</details>

---

<details>
<summary>▶ 2.12 数据分析</summary>

### 📈 仪表盘组件
- 任务完成率（环形图）  
- 标签分布（柱状图）  
- 质量趋势（折线图）  
- 用户贡献（热力图）  

**导出与分享**
- 支持导出 PDF/CSV  
- 可生成报告分享链接  

</details>

---

<details>
<summary>▶ 2.13 API 与集成</summary>

### 🧩 API
- RESTful + tRPC 接口  
- 任务、项目、标注、导出、统计  
- 支持 Python / JS SDK、CLI 工具  

### 🔗 第三方集成
- Slack / GitHub / Jira / Zapier  
- 自定义 Webhook  

</details>

---

## 🗺️ 3. 页面结构总览

| 页面     | 路径                 | 主要组件                   |
| -------- | -------------------- | -------------------------- |
| 登录注册 | `/auth/login`        | Form + OAuthButtons        |
| 仪表盘   | `/dashboard`         | StatsCards + ProjectList   |
| 项目详情 | `/project/[id]`      | Tabs(任务 / 成员 / 设置)   |
| 标注界面 | `/annotate/[taskId]` | Toolbar + Canvas + Sidebar |
| 审核中心 | `/review`            | ReviewBoard + Filters      |
| 数据管理 | `/dataset`           | DataTable + FiltersDrawer  |
| 分析报表 | `/analytics`         | ChartPanel + FilterTabs    |
| 系统设置 | `/admin`             | UserTable + LogTable       |

---

## 🔁 4. 关键用户流程

### 🧭 标注任务流程

数据导入 → 系统生成任务 → 自动分配 → 标注员标注 → 提交审核 → 审核通过/驳回 → 数据导出

```
### ⚡ AI 辅助工作流
```

选择任务 → 启动预标注 → 人工修改 → 质量检查 → 自动评分 → 模型优化

```
### 💬 协作流
```

标注员评论 → @审核员 → 审核员回复 → 评论解决 → 通知更新

```


> **备注**：本文档为团队协作基础版本，可直接导入至 Notion / GitBook / Confluence，用于产品、设计与研发共用。
```

---

## 🧱 5. 非功能性需求（摘要）

| 分类     | 说明                               |
| -------- | ---------------------------------- |
| 性能     | 页面加载 <2s，API 响应 <500ms      |
| 安全     | HTTPS、加密存储、CSRF/XSS 防护     |
| 可用性   | 可用性 99.9%，自动备份与降级       |
| 可扩展性 | 水平扩展、队列处理、CDN 加速       |
| 兼容性   | Chrome 90+ / Safari 14+ / Edge 90+ |
| 易用性   | 新手引导、快捷键提示、操作回退     |

---

## 🚀 6. 产品路线图（时间轴）

| 阶段         | 时间  | 目标功能                                      |
| ------------ | ----- | --------------------------------------------- |
| **MVP**      | 3个月 | 认证、项目、图像/文本标注、基础导出、简易审核 |
| **第二阶段** | 6个月 | 视频/音频标注、AI 预标注、实时协作、Webhook   |
| **第三阶段** | 9个月 | 主动学习、分析报表、移动端支持、SDK           |
| **企业版**   | 持续  | 私有化部署、SLA 支持、安全审计                |

---

## 📊 7. 成功指标

| 类别 | 指标                           |
| ---- | ------------------------------ |
| 产品 | 月活跃用户、留存率、任务完成量 |
| 技术 | 响应时间、错误率、系统可用性   |
| 业务 | 付费用户数、MRR、客户流失率    |

---

## ⚠️ 8. 风险评估

- **技术**：实时协作性能 / 大规模数据吞吐  
- **市场**：竞品强度 / 用户迁移成本  
- **运营**：API 成本 / 数据安全合规性  

---

## 📘 附录

**术语表**
- 标注 (Annotation)：对数据添加语义标签  
- 任务 (Task)：单个标注单元  
- 项目 (Project)：任务集合  
- 区域 (Region)：标注对象  
- 审核 (Review)：质量验证过程  

---